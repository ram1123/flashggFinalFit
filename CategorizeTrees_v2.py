####-- MultiClass DNN

###-- Data
##-- 2016
# python CategorizeTrees.py --iD /eos/user/a/atishelm/ntuples/HHWWgg_DNN/MultiClassifier/HHWWyyDNN_200Epochs-3ClassMulticlass_EvenSingleH_2Hgg_withKinWeightCut10_BalanceYields/ --opt Data --year 2016 --oD /eos/user/a/atishelm/ntuples/HHWWgg_flashgg/January_2021_Production/2016/HHWWyyDNN_200Epochs-3ClassMulticlass_EvenSingleH_2Hgg_withKinWeightCut10_BalanceYields/ --nBoundaries HHWWyyDNN_200Epochs-3ClassMulticlass_EvenSingleH_2Hgg_withKinWeightCut10_BalanceYields.txt --f ata_2016
##-- 2017
# python CategorizeTrees.py --iD /eos/user/a/atishelm/ntuples/HHWWgg_DNN/MultiClassifier/HHWWyyDNN_200Epochs-3ClassMulticlass_EvenSingleH_2Hgg_withKinWeightCut10_BalanceYields/ --opt Data --year 2017 --oD /eos/user/a/atishelm/ntuples/HHWWgg_flashgg/January_2021_Production/2017/HHWWyyDNN_200Epochs-3ClassMulticlass_EvenSingleH_2Hgg_withKinWeightCut10_BalanceYields/ --nBoundaries HHWWyyDNN_200Epochs-3ClassMulticlass_EvenSingleH_2Hgg_withKinWeightCut10_BalanceYields.txt --f ata_2017
##-- 2018
# python CategorizeTrees.py --iD /eos/user/a/atishelm/ntuples/HHWWgg_DNN/MultiClassifier/HHWWyyDNN_200Epochs-3ClassMulticlass_EvenSingleH_2Hgg_withKinWeightCut10_BalanceYields/ --opt Data --year 2018 --oD /eos/user/a/atishelm/ntuples/HHWWgg_flashgg/January_2021_Production/2018/HHWWyyDNN_200Epochs-3ClassMulticlass_EvenSingleH_2Hgg_withKinWeightCut10_BalanceYields/ --nBoundaries HHWWyyDNN_200Epochs-3ClassMulticlass_EvenSingleH_2Hgg_withKinWeightCut10_BalanceYields.txt --f ata_2018

###-- Signal
##-- 2016
# python CategorizeTrees.py --iD /eos/user/a/atishelm/ntuples/HHWWgg_DNN/MultiClassifier/HHWWyyDNN_200Epochs-3ClassMulticlass_EvenSingleH_2Hgg_withKinWeightCut10_BalanceYields/ --opt Signal --year 2016 --oD /eos/user/a/atishelm/ntuples/HHWWgg_flashgg/January_2021_Production/2016/HHWWyyDNN_200Epochs-3ClassMulticlass_EvenSingleH_2Hgg_withKinWeightCut10_BalanceYields/ --nBoundaries HHWWyyDNN_200Epochs-3ClassMulticlass_EvenSingleH_2Hgg_withKinWeightCut10_BalanceYields.txt --f cHHH1_2016 --node cHHH1 --part all
##-- 2017
# python CategorizeTrees.py --iD /eos/user/a/atishelm/ntuples/HHWWgg_DNN/MultiClassifier/HHWWyyDNN_200Epochs-3ClassMulticlass_EvenSingleH_2Hgg_withKinWeightCut10_BalanceYields/ --opt Signal --year 2017 --oD /eos/user/a/atishelm/ntuples/HHWWgg_flashgg/January_2021_Production/2017/HHWWyyDNN_200Epochs-3ClassMulticlass_EvenSingleH_2Hgg_withKinWeightCut10_BalanceYields/ --nBoundaries HHWWyyDNN_200Epochs-3ClassMulticlass_EvenSingleH_2Hgg_withKinWeightCut10_BalanceYields.txt --f cHHH1_2017 --node cHHH1 --part all
##-- 2018
# python CategorizeTrees.py --iD /eos/user/a/atishelm/ntuples/HHWWgg_DNN/MultiClassifier/HHWWyyDNN_200Epochs-3ClassMulticlass_EvenSingleH_2Hgg_withKinWeightCut10_BalanceYields/ --opt Signal --year 2018 --oD /eos/user/a/atishelm/ntuples/HHWWgg_flashgg/January_2021_Production/2018/HHWWyyDNN_200Epochs-3ClassMulticlass_EvenSingleH_2Hgg_withKinWeightCut10_BalanceYields/ --nBoundaries HHWWyyDNN_200Epochs-3ClassMulticlass_EvenSingleH_2Hgg_withKinWeightCut10_BalanceYields.txt --f cHHH1_2018 --node cHHH1 --part all

###-- Single Higgs
##-- 2016
# python CategorizeTrees.py --iD /eos/user/a/atishelm/ntuples/HHWWgg_DNN/MultiClassifier/HHWWyyDNN_200Epochs-3ClassMulticlass_EvenSingleH_2Hgg_withKinWeightCut10_BalanceYields/ --opt SingleHiggs --year 2016 --oD /eos/user/a/atishelm/ntuples/HHWWgg_flashgg/January_2021_Production/2016/HHWWyyDNN_200Epochs-3ClassMulticlass_EvenSingleH_2Hgg_withKinWeightCut10_BalanceYields/ --nBoundaries HHWWyyDNN_200Epochs-3ClassMulticlass_EvenSingleH_2Hgg_withKinWeightCut10_BalanceYields.txt --f GluGluHToGG_M125_2016 --part all
# python CategorizeTrees.py --iD /eos/user/a/atishelm/ntuples/HHWWgg_DNN/MultiClassifier/HHWWyyDNN_200Epochs-3ClassMulticlass_EvenSingleH_2Hgg_withKinWeightCut10_BalanceYields/ --opt SingleHiggs --year 2016 --oD /eos/user/a/atishelm/ntuples/HHWWgg_flashgg/January_2021_Production/2016/HHWWyyDNN_200Epochs-3ClassMulticlass_EvenSingleH_2Hgg_withKinWeightCut10_BalanceYields/ --nBoundaries HHWWyyDNN_200Epochs-3ClassMulticlass_EvenSingleH_2Hgg_withKinWeightCut10_BalanceYields.txt --f VBFHToGG_M125_2016 --part all
# python CategorizeTrees.py --iD /eos/user/a/atishelm/ntuples/HHWWgg_DNN/MultiClassifier/HHWWyyDNN_200Epochs-3ClassMulticlass_EvenSingleH_2Hgg_withKinWeightCut10_BalanceYields/ --opt SingleHiggs --year 2016 --oD /eos/user/a/atishelm/ntuples/HHWWgg_flashgg/January_2021_Production/2016/HHWWyyDNN_200Epochs-3ClassMulticlass_EvenSingleH_2Hgg_withKinWeightCut10_BalanceYields/ --nBoundaries HHWWyyDNN_200Epochs-3ClassMulticlass_EvenSingleH_2Hgg_withKinWeightCut10_BalanceYields.txt --f VHToGG_M125_2016 --part all
# python CategorizeTrees.py --iD /eos/user/a/atishelm/ntuples/HHWWgg_DNN/MultiClassifier/HHWWyyDNN_200Epochs-3ClassMulticlass_EvenSingleH_2Hgg_withKinWeightCut10_BalanceYields/ --opt SingleHiggs --year 2016 --oD /eos/user/a/atishelm/ntuples/HHWWgg_flashgg/January_2021_Production/2016/HHWWyyDNN_200Epochs-3ClassMulticlass_EvenSingleH_2Hgg_withKinWeightCut10_BalanceYields/ --nBoundaries HHWWyyDNN_200Epochs-3ClassMulticlass_EvenSingleH_2Hgg_withKinWeightCut10_BalanceYields.txt --f ttHJetToGG_M125_2016 --part all
##-- 2017
# python CategorizeTrees.py --iD /eos/user/a/atishelm/ntuples/HHWWgg_DNN/MultiClassifier/HHWWyyDNN_200Epochs-3ClassMulticlass_EvenSingleH_2Hgg_withKinWeightCut10_BalanceYields/ --opt SingleHiggs --year 2017 --oD /eos/user/a/atishelm/ntuples/HHWWgg_flashgg/January_2021_Production/2017/HHWWyyDNN_200Epochs-3ClassMulticlass_EvenSingleH_2Hgg_withKinWeightCut10_BalanceYields/ --nBoundaries HHWWyyDNN_200Epochs-3ClassMulticlass_EvenSingleH_2Hgg_withKinWeightCut10_BalanceYields.txt --f GluGluHToGG_2017 --part all
# python CategorizeTrees.py --iD /eos/user/a/atishelm/ntuples/HHWWgg_DNN/MultiClassifier/HHWWyyDNN_200Epochs-3ClassMulticlass_EvenSingleH_2Hgg_withKinWeightCut10_BalanceYields/ --opt SingleHiggs --year 2017 --oD /eos/user/a/atishelm/ntuples/HHWWgg_flashgg/January_2021_Production/2017/HHWWyyDNN_200Epochs-3ClassMulticlass_EvenSingleH_2Hgg_withKinWeightCut10_BalanceYields/ --nBoundaries HHWWyyDNN_200Epochs-3ClassMulticlass_EvenSingleH_2Hgg_withKinWeightCut10_BalanceYields.txt --f VBFHToGG_2017 --part all
# python CategorizeTrees.py --iD /eos/user/a/atishelm/ntuples/HHWWgg_DNN/MultiClassifier/HHWWyyDNN_200Epochs-3ClassMulticlass_EvenSingleH_2Hgg_withKinWeightCut10_BalanceYields/ --opt SingleHiggs --year 2017 --oD /eos/user/a/atishelm/ntuples/HHWWgg_flashgg/January_2021_Production/2017/HHWWyyDNN_200Epochs-3ClassMulticlass_EvenSingleH_2Hgg_withKinWeightCut10_BalanceYields/ --nBoundaries HHWWyyDNN_200Epochs-3ClassMulticlass_EvenSingleH_2Hgg_withKinWeightCut10_BalanceYields.txt --f VHToGG_2017 --part all
# python CategorizeTrees.py --iD /eos/user/a/atishelm/ntuples/HHWWgg_DNN/MultiClassifier/HHWWyyDNN_200Epochs-3ClassMulticlass_EvenSingleH_2Hgg_withKinWeightCut10_BalanceYields/ --opt SingleHiggs --year 2017 --oD /eos/user/a/atishelm/ntuples/HHWWgg_flashgg/January_2021_Production/2017/HHWWyyDNN_200Epochs-3ClassMulticlass_EvenSingleH_2Hgg_withKinWeightCut10_BalanceYields/ --nBoundaries HHWWyyDNN_200Epochs-3ClassMulticlass_EvenSingleH_2Hgg_withKinWeightCut10_BalanceYields.txt --f ttHJetToGG_2017 --part all
##-- 2018
# python CategorizeTrees.py --iD /eos/user/a/atishelm/ntuples/HHWWgg_DNN/MultiClassifier/HHWWyyDNN_200Epochs-3ClassMulticlass_EvenSingleH_2Hgg_withKinWeightCut10_BalanceYields/ --opt SingleHiggs --year 2018 --oD /eos/user/a/atishelm/ntuples/HHWWgg_flashgg/January_2021_Production/2018/HHWWyyDNN_200Epochs-3ClassMulticlass_EvenSingleH_2Hgg_withKinWeightCut10_BalanceYields/ --nBoundaries HHWWyyDNN_200Epochs-3ClassMulticlass_EvenSingleH_2Hgg_withKinWeightCut10_BalanceYields.txt --f GluGluHToGG_M125_2018 --part all
# python CategorizeTrees.py --iD /eos/user/a/atishelm/ntuples/HHWWgg_DNN/MultiClassifier/HHWWyyDNN_200Epochs-3ClassMulticlass_EvenSingleH_2Hgg_withKinWeightCut10_BalanceYields/ --opt SingleHiggs --year 2018 --oD /eos/user/a/atishelm/ntuples/HHWWgg_flashgg/January_2021_Production/2018/HHWWyyDNN_200Epochs-3ClassMulticlass_EvenSingleH_2Hgg_withKinWeightCut10_BalanceYields/ --nBoundaries HHWWyyDNN_200Epochs-3ClassMulticlass_EvenSingleH_2Hgg_withKinWeightCut10_BalanceYields.txt --f VBFHToGG_M125_2018 --part all
# python CategorizeTrees.py --iD /eos/user/a/atishelm/ntuples/HHWWgg_DNN/MultiClassifier/HHWWyyDNN_200Epochs-3ClassMulticlass_EvenSingleH_2Hgg_withKinWeightCut10_BalanceYields/ --opt SingleHiggs --year 2018 --oD /eos/user/a/atishelm/ntuples/HHWWgg_flashgg/January_2021_Production/2018/HHWWyyDNN_200Epochs-3ClassMulticlass_EvenSingleH_2Hgg_withKinWeightCut10_BalanceYields/ --nBoundaries HHWWyyDNN_200Epochs-3ClassMulticlass_EvenSingleH_2Hgg_withKinWeightCut10_BalanceYields.txt --f VHToGG_M125_2018 --part all
# python CategorizeTrees.py --iD /eos/user/a/atishelm/ntuples/HHWWgg_DNN/MultiClassifier/HHWWyyDNN_200Epochs-3ClassMulticlass_EvenSingleH_2Hgg_withKinWeightCut10_BalanceYields/ --opt SingleHiggs --year 2018 --oD /eos/user/a/atishelm/ntuples/HHWWgg_flashgg/January_2021_Production/2018/HHWWyyDNN_200Epochs-3ClassMulticlass_EvenSingleH_2Hgg_withKinWeightCut10_BalanceYields/ --nBoundaries HHWWyyDNN_200Epochs-3ClassMulticlass_EvenSingleH_2Hgg_withKinWeightCut10_BalanceYields.txt --f ttHJetToGG_2018 --part all

################################################################################################

##-- January 2021 DNN
#
##-- Data
# python CategorizeTrees.py --iD /eos/user/b/bmarzocc/HHWWgg/January_2021_Production/HHWWyyDNN_binary_withHgg_BalanceYields_allBkgs_LOSignals_noPtOverM/ --opt Data --year 2018 --oD /eos/user/a/atishelm/ntuples/HHWWgg_flashgg/January_2021_Production/2016/SL_DNN_Categorized_LOSignals_noPtOverM-Training --nBoundaries cats_LOSignals_noPtOverM-Training.txt --f ata_2018
# CategorizeTrees.py --iD input_data/ --opt Data --year 2017 --oD CategorizeTreesOutput --nBoundaries cats.txt
# python CategorizeTrees.py --iD /eos/user/b/bmarzocc/HHWWgg/January_2021_Production/HHWWyyDNN_binary_noHgg_BalanceYields_allBkgs_oddSignal_v3/ --opt Data --year 2018 --oD /eos/user/a/atishelm/ntuples/HHWWgg_flashgg/January_2021_Production/2018/Signal_SL_DNN_Categorized/ --nBoundaries cats.txt --f ata_2018
#
##-- Signal
# python CategorizeTrees.py --iD /eos/user/b/bmarzocc/HHWWgg/January_2021_Production/HHWWyyDNN_binary_withHgg_BalanceYields_allBkgs_LOSignals_noPtOverM/ --opt Signal --year 2016 --oD /eos/user/a/atishelm/ntuples/HHWWgg_flashgg/January_2021_Production/2016/SL_DNN_Categorized_LOSignals_noPtOverM-Training --nBoundaries cats_LOSignals_noPtOverM-Training.txt --f cHHH1_2016 --node cHHH1 --part all
# python CategorizeTrees.py --iD /eos/user/b/bmarzocc/HHWWgg/January_2021_Production/HHWWyyDNN_binary_noHgg_BalanceYields_allBkgs_oddSignal_v3/ --opt Signal --year 2018 --oD /eos/user/a/atishelm/ntuples/HHWWgg_flashgg/January_2021_Production/2018/Signal_SL_DNN_Categorized/ --nBoundaries cats.txt --f cHHH1_2018 --node cHHH1 --part all
# python CategorizeTrees.py --iD input_signal/ --opt Signal --year 2017 --oD CategorizeTreesOutput --nBoundaries cats.txt
# python CategorizeTrees.py --iD /eos/user/b/bmarzocc/HHWWgg/January_2021_Production/HHWWyyDNN_binary_noHgg_BalanceYields_allBkgs_oddSignal_v3/ --opt Signal --year 2018 --oD /eos/user/a/atishelm/ntuples/HHWWgg_flashgg/January_2021_Production/2018/Signal_SL_DNN_Categorized/ --nBoundaries cats.txt --f cHHH1_2018 --node cHHH1
#
##-- Single Higgs
#
# python CategorizeTrees.py --iD /eos/user/b/bmarzocc/HHWWgg/January_2021_Production/HHWWyyDNN_binary_withHgg_BalanceYields_allBkgs_LOSignals_noPtOverM/ --opt SingleHiggs --year 2016 --oD /eos/user/a/atishelm/ntuples/HHWWgg_flashgg/January_2021_Production/2016/SL_DNN_Categorized_LOSignals_noPtOverM-Training/ --nBoundaries cats_LOSignals_noPtOverM-Training.txt --f GluGluHToGG_M125_2016 --part all
# python CategorizeTrees.py --iD /eos/user/b/bmarzocc/HHWWgg/January_2021_Production/HHWWyyDNN_binary_noHgg_BalanceYields_allBkgs_oddSignal_v3/ --opt SingleHiggs --year 2018 --oD /eos/user/a/atishelm/ntuples/HHWWgg_flashgg/January_2021_Production/2018/Signal_SL_DNN_Categorized/ --nBoundaries cats.txt --f GluGluHToGG_M125_2018  --part all
# python CategorizeTrees.py --iD /eos/user/b/bmarzocc/HHWWgg/January_2021_Production/HHWWyyDNN_binary_noHgg_BalanceYields_allBkgs_oddSignal_v3/ --opt SingleHiggs --year 2018 --oD /eos/user/a/atishelm/ntuples/HHWWgg_flashgg/January_2021_Production/2018/Signal_SL_DNN_Categorized/ --nBoundaries cats.txt --f GluGluHToGG_M125_2018  --part all
# python CategorizeTrees.py --iD /eos/user/b/bmarzocc/HHWWgg/January_2021_Production/HHWWyyDNN_binary_noHgg_BalanceYields_allBkgs_oddSignal_v3/ --opt SingleHiggs --year 2018 --oD /eos/user/a/atishelm/ntuples/HHWWgg_flashgg/January_2021_Production/2018/Signal_SL_DNN_Categorized/ --nBoundaries cats.txt --f cHHH5_2018 --node cHHH5 --part all
# python CategorizeTrees.py --iD input_hgg_syst/ --oD HggSyst --opt SingleHiggs --year 2017  --nBoundaries cats.txt
# python CategorizeTrees.py --iD input_hgg/ --oD CategorizeTreesOutput --opt SingleHiggs --year 2017  --nBoundaries cats.txt
#
######################################################################

##-- Single Higgs
# python CategorizeTrees.py --iD TestNewFilesRun2/2017SingleHiggs1/ --oD /eos/user/a/atishelm/ntuples/HHWWgg_DNN_Categorization/TestNewFilesRun2/2017SingleHiggs_Trees/ --nBoundaries /eos/user/a/atishelm/www/HHWWgg/DNN_Tools_again/2017Borders_evalDNN_3cats_testnewfiles_withSidebandScale_xmin-0.000000_binWidth-0.100000.txt --year 2017 --opt SingleHiggs
# python CategorizeTrees.py --iD TestNewFilesRun2/2016SingleHiggs1/ --oD /eos/user/a/atishelm/ntuples/HHWWgg_DNN_Categorization/TestNewFilesRun2/2016SingleHiggs_Trees/ --nBoundaries /eos/user/a/atishelm/www/HHWWgg/DNN_Tools_again/2017Borders_evalDNN_3cats_testnewfiles_withSidebandScale_xmin-0.000000_binWidth-0.100000.txt --year 2016 --opt SingleHiggs
# python CategorizeTrees.py --iD TestNewFilesRun2/2016SingleHiggs1/ --oD /eos/user/a/atishelm/ntuples/HHWWgg_DNN_Categorization/TestNewFilesRun2/2016SingleHiggs_Trees/ --nBoundaries /eos/user/a/atishelm/www/HHWWgg/DNN_Tools_again/2017Borders_evalDNN_3cats_testnewfiles_withSidebandScale_xmin-0.000000_binWidth-0.100000.txt --year 2016 --opt SingleHiggs
#
# python CategorizeTrees.py --iD /afs/cern.ch/work/a/atishelm/private/HHWWgg_Tools/DNN_Tools/2016SingleHiggs1/ --oD /eos/user/a/atishelm/ntuples/HHWWgg_DNN_Categorization/WeightsExp/2016SingleHiggs/ --nBoundaries /eos/user/a/atishelm/www/HHWWgg/DNN_Tools/CustomBorders.txt --year 2016 --opt SingleHiggs
# python CategorizeTrees.py --iD /afs/cern.ch/work/a/atishelm/private/HHWWgg_Tools/DNN_Tools/Backgrounds4/ --oD /eos/user/a/atishelm/ntuples/HHWWgg_DNN_Categorization/WeightsExp/2017SingleHiggs/ --nBoundaries /eos/user/a/atishelm/www/HHWWgg/DNN_Tools/CustomBorders.txt --year 2017 --opt SingleHiggs
# python CategorizeTrees.py --iD /afs/cern.ch/work/a/atishelm/private/HHWWgg_Tools/DNN_Tools/Backgrounds/ --oD /eos/user/a/atishelm/ntuples/HHWWgg_DNN_Categorization/WeightsExp/2017SingleHiggs/ --nBoundaries /eos/user/a/atishelm/www/HHWWgg/DNN_Tools/CustomBorders.txt --year 2017 --opt SingleHiggs

##-- testnewfiles
# python CategorizeTrees.py --iD TestNewFilesRun2/2017Data/ --oD /eos/user/a/atishelm/ntuples/HHWWgg_DNN_Categorization/TestNewFilesRun2/2017Data/ --nBoundaries /eos/user/a/atishelm/www/HHWWgg/DNN_Tools_again/2017Borders_evalDNN_3cats_testnewfiles_withSidebandScale_xmin-0.000000_binWidth-0.100000.txt --year 2017 --opt Data
# python CategorizeTrees.py --iD TestNewFilesRun2/2016Signal/ --oD /eos/user/a/atishelm/ntuples/HHWWgg_DNN_Categorization/TestNewFilesRun2/2016Signal/ --nBoundaries /eos/user/a/atishelm/www/HHWWgg/DNN_Tools_again/2017Borders_evalDNN_3cats_testnewfiles_withSidebandScale_xmin-0.000000_binWidth-0.100000.txt --opt Signal --year 2016
# python CategorizeTrees.py --iD TestNewFilesRun2/2018Signal/ --oD /eos/user/a/atishelm/ntuples/HHWWgg_DNN_Categorization/TestNewFilesRun2/2018Signal/ --nBoundaries /eos/user/a/atishelm/www/HHWWgg/DNN_Tools_again/2017Borders_evalDNN_3cats_testnewfiles_withSidebandScale_xmin-0.000000_binWidth-0.100000.txt --opt Signal --year 2018

##-- Signal
# python CategorizeTrees.py --iD /eos/user/b/bmarzocc/HHWWgg/HHWWgg_DataSignalMCnTuples/PromptPromptApplied-TagsMerged/HHWWyyDNN_binary_testnewfiles_allBkgs/Signal/  --opt Signal --year 2017  --oD /eos/user/a/atishelm/ntuples/HHWWgg_DNN_Categorization/TestNewFiles/ --nBoundaries /eos/user/a/atishelm/www/HHWWgg/DNN_Tools/Borders_withSidebandScale_TestNewFiles.txt

##-- Data
# python CategorizeTrees.py --iD /eos/user/b/bmarzocc/HHWWgg/HHWWgg_DataSignalMCnTuples/PromptPromptApplied-TagsMerged/HHWWyyDNN_binary_testnewfiles_allBkgs/Data/  --opt Data --year 2017  --oD /eos/user/a/atishelm/ntuples/HHWWgg_DNN_Categorization/TestNewFiles/ --nBoundaries /eos/user/a/atishelm/www/HHWWgg/DNN_Tools/Borders_withSidebandScale_TestNewFiles.txt
#
# FH commands
# ###############################################
#
# #   Data
# python CategorizeTrees.py --iD /eos/user/r/rasharma/post_doc_ihep/double-higgs/ntuples/January_2021_Production/DNN/samples_w_DNN/HHWWyyDNN_binary_April2_WWgg_WithQCD_BalanceYields/   --opt Data --year 2017 --oD /eos/user/r/rasharma/post_doc_ihep/double-higgs/ntuples/January_2021_Production/DNN/samples_w_DNN/HHWWyyDNN_binary_April2_WWgg_WithQCD_BalanceYields/CategorizeRootFile/ --nBoundaries BinBoundaries_April2_WWgg_WithQCD.txt --f Data --syst 0
# #
# #   Signal
# python CategorizeTrees.py --iD /eos/user/r/rasharma/post_doc_ihep/double-higgs/ntuples/January_2021_Production/DNN/samples_w_DNN/HHWWyyDNN_binary_April2_WWgg_WithQCD_BalanceYields/   --opt Signal --year 2017 --oD /eos/user/r/rasharma/post_doc_ihep/double-higgs/ntuples/January_2021_Production/DNN/samples_w_DNN/HHWWyyDNN_binary_April2_WWgg_WithQCD_BalanceYields/CategorizeRootFile/ --nBoundaries BinBoundaries_April2_WWgg_WithQCD.txt --f GluGluToHHTo2G2Z --syst 0 --node GluGluToHHTo2G2Z_cHHH1
# python CategorizeTrees.py --iD /eos/user/r/rasharma/post_doc_ihep/double-higgs/ntuples/January_2021_Production/DNN/samples_w_DNN/HHWWyyDNN_binary_April2_WWgg_WithQCD_BalanceYields/   --opt Signal --year 2017 --oD /eos/user/r/rasharma/post_doc_ihep/double-higgs/ntuples/January_2021_Production/DNN/samples_w_DNN/HHWWyyDNN_binary_April2_WWgg_WithQCD_BalanceYields/CategorizeRootFile/ --nBoundaries BinBoundaries_April2_WWgg_WithQCD.txt --f GluGluToHHTo2G4Q --syst 0 --node GluGluToHHTo2G2W_cHHH1
# #
# #   Single Higgs
# python CategorizeTrees.py --iD /eos/user/r/rasharma/post_doc_ihep/double-higgs/ntuples/January_2021_Production/DNN/samples_w_DNN/HHWWyyDNN_binary_April2_WWgg_WithQCD_BalanceYields/   --opt SingleHiggs --year 2017 --oD /eos/user/r/rasharma/post_doc_ihep/double-higgs/ntuples/January_2021_Production/DNN/samples_w_DNN/HHWWyyDNN_binary_April2_WWgg_WithQCD_BalanceYields/CategorizeRootFile/ --nBoundaries BinBoundaries_April2_WWgg_WithQCD.txt --f VHToGG --syst 0
# python CategorizeTrees.py --iD /eos/user/r/rasharma/post_doc_ihep/double-higgs/ntuples/January_2021_Production/DNN/samples_w_DNN/HHWWyyDNN_binary_April2_WWgg_WithQCD_BalanceYields/   --opt SingleHiggs --year 2017 --oD /eos/user/r/rasharma/post_doc_ihep/double-higgs/ntuples/January_2021_Production/DNN/samples_w_DNN/HHWWyyDNN_binary_April2_WWgg_WithQCD_BalanceYields/CategorizeRootFile/ --nBoundaries BinBoundaries_April2_WWgg_WithQCD.txt --f VBFHToGG --syst 0
# python CategorizeTrees.py --iD /eos/user/r/rasharma/post_doc_ihep/double-higgs/ntuples/January_2021_Production/DNN/samples_w_DNN/HHWWyyDNN_binary_April2_WWgg_WithQCD_BalanceYields/   --opt SingleHiggs --year 2017 --oD /eos/user/r/rasharma/post_doc_ihep/double-higgs/ntuples/January_2021_Production/DNN/samples_w_DNN/HHWWyyDNN_binary_April2_WWgg_WithQCD_BalanceYields/CategorizeRootFile/ --nBoundaries BinBoundaries_April2_WWgg_WithQCD.txt --f GluGluHToGG --syst 0
# python CategorizeTrees.py --iD /eos/user/r/rasharma/post_doc_ihep/double-higgs/ntuples/January_2021_Production/DNN/samples_w_DNN/HHWWyyDNN_binary_April2_WWgg_WithQCD_BalanceYields/   --opt SingleHiggs --year 2017 --oD /eos/user/r/rasharma/post_doc_ihep/double-higgs/ntuples/January_2021_Production/DNN/samples_w_DNN/HHWWyyDNN_binary_April2_WWgg_WithQCD_BalanceYields/CategorizeRootFile/ --nBoundaries BinBoundaries_April2_WWgg_WithQCD.txt --f ttHJet --syst 0
# #
import psutil
import os
import ROOT
from optparse import OptionParser

def get_options():
    parser = OptionParser()
    parser.add_option("--iD",type='string',dest="inp_dir",default='')
    parser.add_option("--m",type='string',dest='m',default='h4g')
    parser.add_option("--opt",type='string',dest="option",default='')
    parser.add_option("--nBoundaries",type='string',dest="nBoundaries",default='')
    parser.add_option("--year",type='string',dest="year",default='')
    parser.add_option("--oD",type='string',dest="out_dir",default='')
    parser.add_option("--v",type='string',dest='var',default='evalDNN') ##-- DNN_evaluation by default for multiclassifier
    parser.add_option("--f",type='string',dest='forceContainString',default='')
    parser.add_option("--node",type='string',dest='node',default='NONE')
    parser.add_option("--part",type='string',dest='part',default='1')
    parser.add_option("--syst",type='string',dest='syst',default='1')
    parser.add_option("--ch",type='string',dest='channel',default='FH')
    parser.add_option("--WhichSig",type='string',dest='WhichSig',default='WW')
    return parser.parse_args()
#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

def GetFiles(nTupleDirec_):
    files = []
    Direc = "%s/"%(nTupleDirec_)
    files = [file for file in os.listdir(Direc) if file.endswith(".root")]
    return files

def ShortMCTreeName(MCfileName_):
    ShortTreeDict = {
        "GluGluHToGG_HHWWggTag_0_MoreVars_odd.root" : "ggh_125",
        "VBFHToGG_HHWWggTag_0_MoreVars_odd.root" : "vbf_125",
        "VHToGG_HHWWggTag_0_MoreVars_odd.root" : "wzh_125",
        "ttHJetToGG_HHWWggTag_0_MoreVars_odd.root" : "tth_125",

        "ttHJetToGG_2017_HHWWggTag_0_MoreVars_odd.root" : "tth_125",
        "GluGluHToGG_2017_HHWWggTag_0_MoreVars_odd.root" : "ggh_125",
        "VHToGG_2017_HHWWggTag_0_MoreVars_odd.root" : "wzh_125",
        "VBFHToGG_2017_HHWWggTag_0_MoreVars_odd.root" : "vbf_125",

        "GluGluHToGG_M125_2016_HHWWggTag_0_MoreVars_odd.root" : "ggh_125",
        "VBFHToGG_M125_2016_HHWWggTag_0_MoreVars_odd.root" : "vbf_125",
        "VHToGG_M125_2016_HHWWggTag_0_MoreVars_odd.root" : "wzh_125",
        "ttHJetToGG_M125_2016_HHWWggTag_0_MoreVars_odd.root" : "tth_125",

        "GluGluHToGG_M125_2018_HHWWggTag_0_MoreVars_odd.root" : "ggh_125",
        "VBFHToGG_M125_2018_HHWWggTag_0_MoreVars_odd.root" : "vbf_125",
        "VHToGG_M125_2018_HHWWggTag_0_MoreVars_odd.root" : "wzh_125",
        "ttHJetToGG_M125_2018_HHWWggTag_0_MoreVars_odd.root" : "tth_125",
        "ttHJetToGG_2018_M125_HHWWggTag_0_MoreVars_odd.root" : "tth_125",

        ##-- Full sample - not split into even/odd
        "GluGluHToGG_M125_2016_HHWWggTag_0_MoreVars.root" : "ggh_125",
        "VBFHToGG_M125_2016_HHWWggTag_0_MoreVars.root" : "vbf_125",
        "VHToGG_M125_2016_HHWWggTag_0_MoreVars.root" : "wzh_125",
        "ttHJetToGG_M125_2016_HHWWggTag_0_MoreVars.root" : "tth_125",

        ##-- Full sample - not split into even/odd
        "GluGluHToGG_2017_HHWWggTag_0_MoreVars.root" : "ggh_125",
        "VBFHToGG_2017_HHWWggTag_0_MoreVars.root" : "vbf_125",
        "VHToGG_2017_HHWWggTag_0_MoreVars.root" : "wzh_125",
        "ttHJetToGG_2017_HHWWggTag_0_MoreVars.root" : "tth_125",

        ##-- Full sample - not split into even/odd
        "GluGluHToGG_M125_2018_HHWWggTag_0_MoreVars.root" : "ggh_125",
        "VBFHToGG_M125_2018_HHWWggTag_0_MoreVars.root" : "vbf_125",
        "VHToGG_M125_2018_HHWWggTag_0_MoreVars.root" : "wzh_125",
        "ttHJetToGG_2018_M125_HHWWggTag_0_MoreVars.root" : "tth_125",

    }

    return ShortTreeDict[MCfileName_]

def ShortMCTreeNameFullyHad(MCfileName_):
    ShortTreeDict = {
        "GluGluHToGG_M125.root": "ggh_125",
        "VBFHToGG_M125.root": "vbf_125",
        "VHToGG_M125.root": "wzh_125",
        "ttHJetToGG_M125.root": "tth_125"
    }

    return ShortTreeDict[MCfileName_]

def GetMCTreeName(MCfileName_):
    TreeDict = {
        "GluGluHToGG_HHWWggTag_0_MoreVars_odd.root" : "ggh_125_13TeV_HHWWggTag_0_v1",
        "VBFHToGG_HHWWggTag_0_MoreVars_odd.root" : "vbf_125_13TeV_HHWWggTag_0_v1",
        "VHToGG_HHWWggTag_0_MoreVars_odd.root" : "wzh_125_13TeV_HHWWggTag_0_v1",
        "ttHJetToGG_HHWWggTag_0_MoreVars_odd.root" : "tth_125_13TeV_HHWWggTag_0_v1",

        "ttHJetToGG_2017_HHWWggTag_0_MoreVars_odd.root" : "tth_125_13TeV_HHWWggTag_0_v1",
        "GluGluHToGG_2017_HHWWggTag_0_MoreVars_odd.root" : "ggh_125_13TeV_HHWWggTag_0_v1",
        "VHToGG_2017_HHWWggTag_0_MoreVars_odd.root" : "wzh_125_13TeV_HHWWggTag_0_v1",
        "VBFHToGG_2017_HHWWggTag_0_MoreVars_odd.root" : "vbf_125_13TeV_HHWWggTag_0_v1",

        "GluGluHToGG_M125_2016_HHWWggTag_0_MoreVars_odd.root" : "ggh_125_13TeV_HHWWggTag_0_v1",
        "VBFHToGG_M125_2016_HHWWggTag_0_MoreVars_odd.root" : "vbf_125_13TeV_HHWWggTag_0_v1",
        "VHToGG_M125_2016_HHWWggTag_0_MoreVars_odd.root" : "wzh_125_13TeV_HHWWggTag_0_v1",
        "ttHJetToGG_M125_2016_HHWWggTag_0_MoreVars_odd.root" : "tth_125_13TeV_HHWWggTag_0_v1",

        "GluGluHToGG_M125_2018_HHWWggTag_0_MoreVars_odd.root" : "ggh_125_13TeV_HHWWggTag_0_v1",
        "VBFHToGG_M125_2018_HHWWggTag_0_MoreVars_odd.root" : "vbf_125_13TeV_HHWWggTag_0_v1",
        "VHToGG_M125_2018_HHWWggTag_0_MoreVars_odd.root" : "wzh_125_13TeV_HHWWggTag_0_v1",
        "ttHJetToGG_M125_2018_HHWWggTag_0_MoreVars_odd.root" : "tth_125_13TeV_HHWWggTag_0_v1",
        "ttHJetToGG_2018_M125_HHWWggTag_0_MoreVars_odd.root" : "tth_125_13TeV_HHWWggTag_0_v1",

        ##-- Full sample - not split into even/odd
        "GluGluHToGG_M125_2016_HHWWggTag_0_MoreVars.root" : "ggh_125_13TeV_HHWWggTag_0_v1",
        "VBFHToGG_M125_2016_HHWWggTag_0_MoreVars.root" : "vbf_125_13TeV_HHWWggTag_0_v1",
        "VHToGG_M125_2016_HHWWggTag_0_MoreVars.root" : "wzh_125_13TeV_HHWWggTag_0_v1",
        "ttHJetToGG_M125_2016_HHWWggTag_0_MoreVars.root" : "tth_125_13TeV_HHWWggTag_0_v1",

        ##-- Full sample - not split into even/odd
        "GluGluHToGG_2017_HHWWggTag_0_MoreVars.root" : "ggh_125_13TeV_HHWWggTag_0_v1",
        "VBFHToGG_2017_HHWWggTag_0_MoreVars.root" : "vbf_125_13TeV_HHWWggTag_0_v1",
        "VHToGG_2017_HHWWggTag_0_MoreVars.root" : "wzh_125_13TeV_HHWWggTag_0_v1",
        "ttHJetToGG_2017_HHWWggTag_0_MoreVars.root" : "tth_125_13TeV_HHWWggTag_0_v1",

        ##-- Full sample - not split into even/odd
        "GluGluHToGG_M125_2018_HHWWggTag_0_MoreVars.root" : "ggh_125_13TeV_HHWWggTag_0_v1",
        "VBFHToGG_M125_2018_HHWWggTag_0_MoreVars.root" : "vbf_125_13TeV_HHWWggTag_0_v1",
        "VHToGG_M125_2018_HHWWggTag_0_MoreVars.root" : "wzh_125_13TeV_HHWWggTag_0_v1",
        "ttHJetToGG_2018_M125_HHWWggTag_0_MoreVars.root" : "tth_125_13TeV_HHWWggTag_0_v1",
    }

    return TreeDict[MCfileName_]

def GetMCTreeNameFullyHad(MCfileName_):
    TreeDict = {
        "GluGluHToGG_M125.root": "output_tree",
        "VBFHToGG_M125.root": "output_tree",
        "VHToGG_M125.root": "output_tree",
        "ttHJetToGG_M125.root": "output_tree"
    }
    return TreeDict[MCfileName_]

def GetMCLabel(MCfileName_):
    NameDict = {
        "GluGluHToGG_HHWWggTag_0_MoreVars_odd.root" : "GluGluHToGG",
        "VBFHToGG_HHWWggTag_0_MoreVars_odd.root" : "VBFHToGG",
        "VHToGG_HHWWggTag_0_MoreVars_odd.root" : "VHToGG",
        "ttHJetToGG_HHWWggTag_0_MoreVars_odd.root" : "ttHJetToGG",

        "ttHJetToGG_2017_HHWWggTag_0_MoreVars_odd.root" : "ttHJetToGG",
        "GluGluHToGG_2017_HHWWggTag_0_MoreVars_odd.root" : "GluGluHToGG",
        "VHToGG_2017_HHWWggTag_0_MoreVars_odd.root" : "VHToGG",
        "VBFHToGG_2017_HHWWggTag_0_MoreVars_odd.root" : "VBFHToGG",

        "GluGluHToGG_M125_2016_HHWWggTag_0_MoreVars_odd.root" : "GluGluHToGG",
        "VBFHToGG_M125_2016_HHWWggTag_0_MoreVars_odd.root" : "VBFHToGG",
        "VHToGG_M125_2016_HHWWggTag_0_MoreVars_odd.root" : "VHToGG",
        "ttHJetToGG_M125_2016_HHWWggTag_0_MoreVars_odd.root" : "ttHJetToGG",

        "GluGluHToGG_M125_2018_HHWWggTag_0_MoreVars_odd.root" : "GluGluHToGG",
        "VBFHToGG_M125_2018_HHWWggTag_0_MoreVars_odd.root" : "VBFHToGG",
        "VHToGG_M125_2018_HHWWggTag_0_MoreVars_odd.root" : "VHToGG",
        "ttHJetToGG_M125_2018_HHWWggTag_0_MoreVars_odd.root" : "ttHJetToGG",
        "ttHJetToGG_2018_M125_HHWWggTag_0_MoreVars_odd.root" : "ttHJetToGG",

        ##-- Full sample - not split into even/odd
        "GluGluHToGG_M125_2016_HHWWggTag_0_MoreVars.root" : "GluGluHToGG",
        "VBFHToGG_M125_2016_HHWWggTag_0_MoreVars.root" : "VBFHToGG",
        "VHToGG_M125_2016_HHWWggTag_0_MoreVars.root" : "VHToGG",
        "ttHJetToGG_M125_2016_HHWWggTag_0_MoreVars.root" : "ttHJetToGG",

        ##-- Full sample - not split into even/odd
        "GluGluHToGG_2017_HHWWggTag_0_MoreVars.root" : "GluGluHToGG",
        "VBFHToGG_2017_HHWWggTag_0_MoreVars.root" : "VBFHToGG",
        "VHToGG_2017_HHWWggTag_0_MoreVars.root" : "VHToGG",
        "ttHJetToGG_2017_HHWWggTag_0_MoreVars.root" : "ttHJetToGG",

        ##-- Full sample - not split into even/odd
        "GluGluHToGG_M125_2018_HHWWggTag_0_MoreVars.root" : "GluGluHToGG",
        "VBFHToGG_M125_2018_HHWWggTag_0_MoreVars.root" : "VBFHToGG",
        "VHToGG_M125_2018_HHWWggTag_0_MoreVars.root" : "VHToGG",
        "ttHJetToGG_2018_M125_HHWWggTag_0_MoreVars.root" : "ttHJetToGG",

    }

    return NameDict[MCfileName_]

def GetMCLabelFullyHad(MCfileName_):
    NameDict = {
        "GluGluHToGG_M125.root": "GluGluHToGG",
        "VBFHToGG_M125.root": "VBFHToGG",
        "VHToGG_M125.root": "VHToGG",
        "ttHJetToGG_M125.root": "ttHJetToGG"
    }

    return NameDict[MCfileName_]

def getallTrees(d, basepath="/", SearchString="Tag_1", verbose=False):
    "Recurse through a ROOT file/dir and generate (path, obj) pairs"
    for key in d.GetListOfKeys():
        kname = key.GetName()
        obj = key.ReadObj();
        if obj.IsA().InheritsFrom(ROOT.TDirectory.Class()):
            print kname
            d.cd(key.GetName());
            subdir = ROOT.gDirectory;
            for i in getallTrees(subdir, basepath+kname+"/", SearchString):
                yield i
        elif (obj.IsA().InheritsFrom(ROOT.TTree.Class()) and (kname.find(SearchString) != -1)):
            yield basepath+kname

(opt,args) = get_options()

print("Input directory  = ",opt.inp_dir)
print("m    = ",opt.m)
print("option   = ",opt.option)
print("nBoundaries  = ",opt.nBoundaries)
print("year = ",opt.year)
print("out_dir  = ",opt.out_dir)
print("var  = ",opt.var)
print("forceContainString   = ",opt.forceContainString)
print("node = ",opt.node)
print("part = ",opt.part)
print("syst = ",opt.syst)
print("channel  = ",opt.channel)
print("WhichSig = ",opt.WhichSig)

nTupleDirec = opt.inp_dir
channel = opt.channel

input_files = GetFiles(nTupleDirec)
print("input_files:",input_files)

input_names = []

cut_list = []

print opt.nBoundaries
nBoundaries_file = open(opt.nBoundaries+'',"r")
nBoundaries_list = []
for word in nBoundaries_file.read().split():
    nBoundaries_list.append(word)

print (nBoundaries_list)
nBoundaries = len(nBoundaries_list)

if (nBoundaries == 3):
    print "2 Categories"
    cut_list.append(opt.var+'>='+str(nBoundaries_list[nBoundaries-2]))
    cut_list.append(opt.var+'<'+str(nBoundaries_list[nBoundaries-2]))

if (nBoundaries==4):
    print "3 Categories"
    cut_list.append(opt.var+'>='+str(nBoundaries_list[nBoundaries-2]))
    cut_list.append(opt.var+'<'+str(nBoundaries_list[nBoundaries-2])+'&&'+opt.var+'>='+str(nBoundaries_list[nBoundaries-3]))
    cut_list.append(opt.var+'<'+str(nBoundaries_list[nBoundaries-3]))

if (nBoundaries==5):
    print "4 Categories"
    cut_list.append(opt.var+'>='+str(nBoundaries_list[nBoundaries-2]))
    cut_list.append(opt.var+'<'+str(nBoundaries_list[nBoundaries-2])+'&&'+opt.var+'>='+str(nBoundaries_list[nBoundaries-3]))
    cut_list.append(opt.var+'<'+str(nBoundaries_list[nBoundaries-3])+'&&'+opt.var+'>='+str(nBoundaries_list[nBoundaries-4]))

    #cut_list.append(opt.var+'<'+str(nBoundaries_list[nBoundaries-4]))

    Boundary_4 = str(nBoundaries_list[nBoundaries-4])
    Boundary_5 = str(nBoundaries_list[nBoundaries-5])

    cut_list.append("%s < %s && %s >= %s"%(opt.var, Boundary_4, opt.var, Boundary_5))


if (nBoundaries==6):
    print "5 Categories"
    cut_list.append(opt.var+'>='+str(nBoundaries_list[nBoundaries-2]))
    cut_list.append(opt.var+'<'+str(nBoundaries_list[nBoundaries-2])+'&&'+opt.var+'>='+str(nBoundaries_list[nBoundaries-3]))
    cut_list.append(opt.var+'<'+str(nBoundaries_list[nBoundaries-3])+'&&'+opt.var+'>='+str(nBoundaries_list[nBoundaries-4]))
    cut_list.append(opt.var+'<'+str(nBoundaries_list[nBoundaries-4])+'&&'+opt.var+'>='+str(nBoundaries_list[nBoundaries-5]))
    cut_list.append(opt.var+'<'+str(nBoundaries_list[nBoundaries-5]))

print"cut_list:",cut_list

print "="*51
for num,f in enumerate(input_files):
    # print 'input file: ',f
    if((opt.forceContainString != "") and (opt.forceContainString not in f)):
        print"Skipping file:",f,"because it doesn't contain:",opt.forceContainString
        continue
    tfile = ROOT.TFile("%s%s"%(opt.inp_dir,f))
    print 'input file: ',f
    treename = ""
    treelist = []

    rootobjects_raw =  list(getallTrees(tfile))
    treelist = [item for item in rootobjects_raw]
    print "Number of trees: ",len(treelist)
    print "trees: ",(treelist)
    outName = "test.root"

    if(opt.option == "SingleHiggs"):
        MCLabel = ""
        if channel=="SL": MCLabel = GetMCLabel(f)
        if channel=="FH": MCLabel = GetMCLabelFullyHad(f)
        print"MCLabel:",MCLabel
        outName = "%s/%s_%s_%s_%s_CategorizedTrees.root"%(opt.out_dir,opt.option,MCLabel,opt.year,opt.part)
    elif(opt.option == "Signal"):
        outName = "%s/%s_%s_%s_%s_CategorizedTrees.root"%(opt.out_dir,opt.option,opt.node,opt.year,opt.part)
        if channel == "FH": outName = "%s/%s_%s_%s_%s_%s_CategorizedTrees.root"%(opt.out_dir,opt.option,opt.forceContainString,opt.node,opt.year,opt.part)
    elif(opt.option == 'Data'):
        outName = "%s/%s_%s_CategorizedTrees.root"%(opt.out_dir,opt.option,opt.year)
    print("output root file name: ",outName)
    f_out = ROOT.TFile.Open(outName,'RECREATE')
    common_cut = '(1)'
    #common_cut = '(((Leading_Photon_pt/CMS_hgg_mass) > (1/3))*((Subleading_Photon_pt/CMS_hgg_mass) > (1/4)) )'
    for tree_i, tree in enumerate(treelist):
        print"On Systematic %s / %s"%(tree_i+1, len(treelist))
        if treelist[tree_i].startswith("/"):
            treelist[tree_i] = treelist[tree_i][1:]
        print"Looking for tree:",treelist[tree_i]
        ntuple = tfile.Get(treelist[tree_i].replace("/",""))
        print("ntuple:",ntuple)
        for icat, cat in enumerate(cut_list):
            print"category:",icat
            print"percentage of RAM in use:",psutil.virtual_memory().percent
            # print"percentage of CPU in use:",psutil.cpu_percent()
            """
            # f_out.cd()
            #  print"ntuple:",ntuple
            ##-- remove non 1d branches because otherwise you run into problems with workspace step treetoarray
            #ntuple.SetBranchStatus("pdfWeights",0)
            #ntuple.SetBranchStatus("alphaSWeights",0)
            #ntuple.SetBranchStatus("scaleWeights",0)
            """
            print "Cut: ",(common_cut+'&&'+cut_list[icat])
            CategorizedTree = ntuple.CopyTree(common_cut+'&&'+cut_list[icat])
            treename_tmp = "test"
            if channel == "FH":
                treename_tmp = tree.replace("HHWWggTag_1","HHWWggTag_FH_%s"%(str(icat)))
            if channel == "SL":
                treename_tmp = tree.replace("HHWWggTag_0","HHWWggTag_SL_%s"%(str(icat)))

            CategorizedTree.SetName(treename_tmp)
            CategorizedTree.SetTitle(treename_tmp)
            f_out.cd()
            CategorizedTree.Write()
            del CategorizedTree
        del ntuple
    del tfile
    # f_out.Write()
    f_out.Close()
